location / {
    # Laravel routing - try files then fallback to index.php
    try_files $uri $uri/ /index.php?$query_string;
}

location ~ \.php$ {
    # Handle PHP files
    try_files @heroku-fcgi @heroku-fcgi;
}

location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
    # Handle static assets with caching
    expires 1y;
    add_header Cache-Control "public, immutable";
    access_log off;
}

location ~ ^/(composer\.(json|lock|phar)$|Procfile$|vendor/bin/) {
    # Block access to sensitive files
    deny all;
}